<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta ver="1.0.5+">

    <title>Loan Assistance Tool / Home </title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="images/favicons/favicon.png" rel="icon">
    <link href="images/favicons/favicon.png" rel="apple-touch-icon">

    <!-- CSS Files -->
    <link rel="stylesheet" media="all" href="css/styles.min.css"  media="all"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link href="css/walkthrough.css" rel="stylesheet" media="all">
    <link href="./css/stepper.css" rel="stylesheet" media="all"/>
    <link href="./css/lrt.css" rel="stylesheet" media="all"/>
    <link href="css/newHome.css" rel="stylesheet" media="all"/>
</head>

<body>
    <!-- ======= Header ======= -->
    <header class="main-header" role="banner" aria-label="Page Header" id="header">
        <!-- loaded in script see below: $("#main-header").load("/components/landingpage.html") -->
    </header>
    <!-- End Header -->

    <main id="main-content">
        <!-- loaded context ually through script see below -->
    </main>

    <!-- ======= Footer ======= -->
    <footer id="main-footer">
         <!-- loaded through script see below: $("#main-footer").load("/components/footer.html") -->
    </footer>
    <!-- End Footer -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="js/farmers.min.js"></script>
    
    <!-- add GSAP library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.0/gsap.min.js"></script>
    <!-- add GSAP ScrollTo Plugin-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.0/ScrollToPlugin.min.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script src="https://code.getmdl.io/1.2.1/material.js" type="text/javascript"></script>
    <script src="../js/stepper.min.js" type="text/javascript"></script>

    <!-- manage state -->
    <script src="./js/stateManager.js"></script>

    <script>
        // Initialize page
        (function() {
            // Scroll page to top on refresh
            history.scrollRestoration = "manual";
            window.onbeforeunload = function () { window.scrollTo(0,0); };

            // Load from html component header
            $('#header').load("/components/header.html");
            
            // Get the current page
            var pageName = getCurrentPage();
            
            // load home page on first load
            if(pageName === undefined || pageName === "") {
                pageName = 'home';
            }

            setContent('quiz');
            
            // Load from html component footer.html
            $('#main-footer').load("/components/footer.html");
            
            // Catch keyup event
            $(document).keyup(function(e){
                // Debug hotkeys: 0= reset cookies, 1= show question and answers, 2= show user state
                debugTools(location.hostname, e);
            });

            // set link highlight
            $(document).ready(function () {
                gsap.registerPlugin(ScrollToPlugin);
            });
        })();

        // Called from onClick in header.html links
        function setContent(pageName) {
            // loads component based on passed in name 
            $("#main-content").empty();
            $("#main-content").load("/components/" + pageName + ".html");
            // Save current page so refresh can show th ecurrent page
            setCurrentPage(pageName);
            
            $(document).ready(function () {
                highlightLink(pageName);
            });
        };

        function highlightLink(pageName) {

            $.each(getPageList(), function(key) {
                // return if element doesn' exist
                if(document.getElementById(getPageList()[key]) === null) { return; }

                // if(getPageList()[key] === pageName || pageName === "form") {
                //     if(pageName === "form") { key = "support"; }

                if(getPageList()[key] === pageName) {
                    console.log(pageName);
                    document.getElementById(getPageList()[key]).className = "active-trail page-link mm-active";
                }
                else {
                    document.getElementById(getPageList()[key]).className = "page-link";
                }
            });
        }
    </script>
</body>
</html>